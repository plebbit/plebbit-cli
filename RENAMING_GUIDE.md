# Bitsocial-CLI Renaming Guide

This document provides a comprehensive checklist for renaming the plebbit-cli codebase:
- **plebbit-cli** → **bitsocial-cli**
- **plebbit** (command) → **bitsocial** (command)
- **subplebbit** → **community**

> **Note:** plebbit-js has NOT been rebranded yet. All @plebbit/plebbit-js imports, Plebbit class names, and plebbit-js API calls (createSubplebbit, getSubplebbit, etc.) remain unchanged.

## Summary Statistics

- **Total "plebbit" occurrences:** ~739 across 38 files
- **Total "subplebbit" occurrences:** ~187 across 26 files
- **Source files:** 14 TypeScript files in src/
- **Test files:** 9 test files
- **CI/Build files:** 3 files in ci-bin/

---

## Phase 1: Package Configuration & Project Files

### 1.1 Package Identity
- [x] **package.json** - Rename package
  - Line 2: `"name": "plebbit-cli"` → `"name": "bitsocial-cli"`
  - Line 4: `"description": "Command line interface to Plebbit API"` → `"description": "Command line interface to BitSocial API"`
  - Line 6: `"homepage": "https://github.com/plebbit/plebbit-cli"` → `"homepage": "https://github.com/bitsocialhq/bitsocial-cli"`
  - Line 7: `"repository": "git@github.com:plebbit/plebbit-cli.git"` → `"repository": "git@github.com:bitsocialhq/bitsocial-cli.git"`
  - Line 41: `"plebbit": "./bin/run"` → `"bitsocial": "./bin/run"`

### 1.2 Oclif Configuration (package.json)
- [x] **package.json oclif section**
  - Line 45: `"bin": "plebbit"` → `"bin": "bitsocial"`
  - Line 46: `"dirname": "plebbit"` → `"dirname": "bitsocial"`
  - Lines 54-59: Update topics (remove `subplebbit:role` topic as it has no commands)
    ```json
    "topics": {
        "community": {
            "description": "Access and manage your communities"
        }
    }
    ```

### 1.3 External Dependencies
- [ ] **package.json dependencies** - SKIPPED (plebbit-js not yet rebranded)
  - `"@plebbit/plebbit-js": "..."` remains unchanged

### 1.4 Oclif Manifest
- [x] **oclif.manifest.json** - This file is auto-generated by `oclif manifest` command
  - Regenerated after source code changes

---

## Phase 2: Directory Structure Renaming

### 2.1 Source Directories
- [x] `src/cli/commands/subplebbit/` → `src/cli/commands/community/`

### 2.2 Test Directories
- [x] Test files remain in `test/cli/` but have been renamed (see Phase 9)

### 2.3 Data Storage Directories (Runtime)
- [x] Default data path: `.plebbit` → `.bitsocial` (handled via env-paths)
- [x] IPFS directory: `.ipfs-plebbit-cli` → `.ipfs-bitsocial-cli`
- [ ] Note: Automatic migration skipped (Phase 13)

### 2.4 Gitignore Updates
- [x] **.gitignore** Line 110-111:
  - `# Plebbit data directory` → `# BitSocial data directory`
  - `.plebbit/` → `.bitsocial/` (also kept .plebbit/ for compatibility)

---

## Phase 3: Source File Renaming

### 3.1 Command Files
- [x] `src/cli/commands/subplebbit/create.ts` → `src/cli/commands/community/create.ts`
- [x] `src/cli/commands/subplebbit/edit.ts` → `src/cli/commands/community/edit.ts`
- [x] `src/cli/commands/subplebbit/get.ts` → `src/cli/commands/community/get.ts`
- [x] `src/cli/commands/subplebbit/list.ts` → `src/cli/commands/community/list.ts`
- [x] `src/cli/commands/subplebbit/start.ts` → `src/cli/commands/community/start.ts`
- [x] `src/cli/commands/subplebbit/stop.ts` → `src/cli/commands/community/stop.ts`

### 3.2 Type Files
- [ ] `src/cli/types.ts` - SKIPPED (plebbit-js types unchanged)

### 3.3 Test Type Files
- [x] `test/types/subplebbitTypes.ts` → `test/types/communityTypes.ts`

### 3.4 Test Fixtures
- [x] `test/fixtures/subplebbitForEditFixture.ts` → `test/fixtures/communityForEditFixture.ts`

---

## Phase 4: Class, Type & Interface Renaming

### 4.1 Type Definitions (src/cli/types.ts)
- [ ] SKIPPED - plebbit-js types remain unchanged

### 4.2 Base Command (src/cli/base-command.ts)
- [ ] SKIPPED - plebbit-js imports remain unchanged
- [ ] Method `_connectToPlebbitRpc()` remains unchanged (plebbit-js API)

### 4.3 Test Types (test/types/communityTypes.ts)
- [x] File renamed but plebbit-js type references remain unchanged

---

## Phase 5: CLI Commands Renaming

### 5.1 Command Structure
Old command structure:
```
plebbit daemon
plebbit subplebbit create
plebbit subplebbit edit
plebbit subplebbit get
plebbit subplebbit list
plebbit subplebbit start
plebbit subplebbit stop
```

New command structure:
```
bitsocial daemon
bitsocial community create
bitsocial community edit
bitsocial community get
bitsocial community list
bitsocial community start
bitsocial community stop
```

### 5.2 Command File Updates

**src/cli/commands/daemon.ts:**
- [x] Update description: `"Run a network-connected Plebbit node..."` → `"Run a network-connected BitSocial node..."`
- [x] Update examples: `"plebbit daemon"` → `"bitsocial daemon"`
- [x] Update config path reference: `.ipfs-plebbit-cli/config` → `.ipfs-bitsocial-cli/config`
- [x] Update output: `"Subplebbits in data path"` → `"Communities in data path"`
- [x] Update output: `"Plebbit data path"` → `"BitSocial data path"`

**src/cli/commands/community/create.ts:**
- [x] Update description: `"Create a subplebbit..."` → `"Create a community..."`
- [x] Update examples
- [x] Update logger namespace: `"plebbit-cli:commands:subplebbit:create"` → `"bitsocial-cli:commands:community:create"`

**src/cli/commands/community/edit.ts:**
- [x] Update description: `"Edit a subplebbit..."` → `"Edit a community..."`
- [x] Update examples
- [x] Update logger namespace

**src/cli/commands/community/get.ts:**
- [x] Update description and examples
- [x] Update logger namespace

**src/cli/commands/community/list.ts:**
- [x] Update description and examples
- [x] Update logger namespace

**src/cli/commands/community/start.ts:**
- [x] Update description: `"Start a subplebbit..."` → `"Start a community..."`
- [x] Update examples
- [x] Update logger namespace

**src/cli/commands/community/stop.ts:**
- [x] Update description: `"Stop a subplebbit..."` → `"Stop a community..."`
- [x] Update examples
- [x] Update logger namespace

### 5.3 Hook Files
**src/cli/hooks/prerun/parse-dynamic-flags-hook.ts:**
- [x] Update command IDs:
  - `"subplebbit:edit"` → `"community:edit"`
  - `"subplebbit:create"` → `"community:create"`

### 5.4 Daemon Log File Naming
**src/cli/commands/daemon.ts:**
- [x] Update log file prefix check: `"plebbit_cli_daemon"` → `"bitsocial_cli_daemon"`
- [x] Update log file naming

---

## Phase 6: Environment Variables & Paths

### 6.1 Defaults (src/common-utils/defaults.ts)
- [x] `envPaths("plebbit", ...)` → `envPaths("bitsocial", ...)`
- [ ] Note: Variable names like `PLEBBIT_DATA_PATH` kept for now (internal only)

### 6.2 Utility Functions (src/util.ts)
- [x] `.ipfs-plebbit-cli` → `.ipfs-bitsocial-cli`

### 6.3 IPFS Data Path
- [x] `src/ipfs/startIpfs.ts`: `.plebbit-cli.ipfs` → `.bitsocial-cli.ipfs`

---

## Phase 7: Logger Namespaces

### 7.1 Logger Prefix Changes
- [x] All logger namespaces updated:

| Old Namespace | New Namespace |
|---------------|---------------|
| `plebbit-cli:daemon` | `bitsocial-cli:daemon` |
| `plebbit-cli:daemon:startDaemonServer` | `bitsocial-cli:daemon:startDaemonServer` |
| `plebbit-cli:commands:subplebbit:create` | `bitsocial-cli:commands:community:create` |
| `plebbit-cli:commands:subplebbit:edit` | `bitsocial-cli:commands:community:edit` |
| `plebbit-cli:commands:subplebbit:list` | `bitsocial-cli:commands:community:list` |
| `plebbit-cli:commands:subplebbit:start` | `bitsocial-cli:commands:community:start` |
| `plebbit-cli:commands:subplebbit:stop` | `bitsocial-cli:commands:community:stop` |
| `plebbit-cli:ipfs:startKuboNode` | `bitsocial-cli:ipfs:startKuboNode` |

### 7.2 Debug Environment Variable
- [x] `.vscode/launch.json`: `"DEBUG": "plebbit*"` → `"DEBUG": "bitsocial*, plebbit*"`
- [x] `src/cli/commands/daemon.ts`: Default debug namespace updated to include `bitsocial*`

---

## Phase 8: Installation Scripts

### 8.1 Install Script (bin/install.sh)
- [x] Tarball naming: `plebbit_*.tar.gz` → `bitsocial_*.tar.gz`
- [x] GitHub URLs: `github.com/plebbit/plebbit-cli` → `github.com/bitsocialhq/bitsocial-cli`
- [x] Install directory: `$HOME/.plebbit_install_files` → `$HOME/.bitsocial_install_files`
- [x] Binary paths and symlinks updated
- [x] User-facing messages updated

---

## Phase 9: Test Files

### 9.1 Test File Renaming
- [x] `test/cli/create.subplebbit.test.ts` → `test/cli/create.community.test.ts`
- [x] `test/cli/edit.subplebbit.test.ts` → `test/cli/edit.community.test.ts`
- [x] `test/cli/get.subplebbit.test.ts` → `test/cli/get.community.test.ts`
- [x] `test/cli/list.subplebbit.test.ts` → `test/cli/list.community.test.ts`
- [x] `test/cli/start.subplebbit.test.ts` → `test/cli/start.community.test.ts`
- [x] `test/cli/stop.subplebbit.test.ts` → `test/cli/stop.community.test.ts`

### 9.2 Test Content Updates
- [x] Command references updated: `plebbit subplebbit create` → `bitsocial community create`
- [x] Import paths updated to new file locations
- [x] Describe blocks updated

### 9.3 Test Fixture Files
- [x] `test/fixtures/sub_0_private_key.pem` → `test/fixtures/community_0_private_key.pem`
- [x] `test/fixtures/sub_1_private_key.pem` → `test/fixtures/community_1_private_key.pem`
- [x] Fixture path references updated in test files

### 9.4 Daemon Test File
- [x] `test/cli/daemon.test.ts` - Updated describe blocks and comments

---

## Phase 10: Documentation

### 10.1 README.md
- [x] Project title: `plebbit-cli` → `bitsocial-cli`
- [x] All command examples: `plebbit` → `bitsocial`
- [x] All `subplebbit` references → `community`
- [x] Installation instructions updated
- [x] GitHub URLs updated
- [x] Data path examples updated
- [ ] Commands section (auto-generated, will update with `yarn generate:readme`)

---

## Phase 11: CI/CD & Build

### 11.1 CI Scripts (ci-bin/)
**ci-bin/rename-tarballs-installers.ts:**
- [x] Tarball naming: `plebbit_` → `bitsocial_`
- [x] Installer naming: `plebbit_installer_` → `bitsocial_installer_`

**ci-bin/run-daemon-before-release.ts:**
- [x] Logger namespaces updated
- [x] Function name: `spawnPlebbitProcess` → `spawnBitsocialProcess`
- [x] Variable names updated
- [x] Commands updated: `subplebbit` → `community`
- [x] Wait pattern: `"Subplebbits in data path"` → `"Communities in data path"`

### 11.2 GitHub Workflows (.github/workflows/)
**CI.yml:**
- [x] Job name: `test-plebbit-cli:` → `test-bitsocial-cli:`
- [x] Debug env: `DEBUG="plebbit*"` → `DEBUG="bitsocial*, plebbit*"`

---

## Phase 12: External Dependencies

### 12.1 NPM Packages
- [ ] SKIPPED - plebbit-js not yet rebranded
  - `@plebbit/plebbit-js` remains unchanged
  - `@plebbit/plebbit-logger` remains unchanged (imported via plebbit-js)

### 12.2 WebUI Server (src/webui/daemon-server.ts)
- [x] Logger namespace updated
- [ ] plebbit-js imports remain unchanged

### 12.3 IPFS Startup (src/ipfs/startIpfs.ts)
- [x] Log message: `"Applied plebbit CLI defaults..."` → `"Applied bitsocial CLI defaults..."`
- [x] Logger namespace updated

---

## Phase 13: Data Migration (Automatic)

- [ ] SKIPPED - Migration code not added per user request
- Note: Users with existing `.plebbit` directories will need to manually migrate or the CLI will create new `.bitsocial` directories

---

## Phase 14: VSCode Configuration

### 14.1 Launch Configuration (.vscode/launch.json)
- [x] `"DEBUG": "plebbit*"` → `"DEBUG": "bitsocial*, plebbit*"`

---

## Progress Tracking

| Phase | Status | Notes |
|-------|--------|-------|
| Phase 1: Package Config | [x] Complete | |
| Phase 2: Directory Structure | [x] Complete | |
| Phase 3: Source Files | [x] Complete | |
| Phase 4: Classes & Types | [ ] Skipped | plebbit-js not rebranded |
| Phase 5: CLI Commands | [x] Complete | |
| Phase 6: Environment Variables | [x] Complete | |
| Phase 7: Logger Namespaces | [x] Complete | |
| Phase 8: Installation Scripts | [x] Complete | |
| Phase 9: Test Files | [x] Complete | |
| Phase 10: Documentation | [x] Complete | |
| Phase 11: CI/CD & Build | [x] Complete | |
| Phase 12: External Dependencies | [ ] Skipped | plebbit-js not rebranded |
| Phase 13: Data Migration | [ ] Skipped | Per user request |
| Phase 14: VSCode Config | [x] Complete | |
| Final Verification | [x] Complete | Build & tests pass |

---

## What Was NOT Changed (plebbit-js dependency)

Since plebbit-js has not been rebranded yet, the following remain unchanged:
- `@plebbit/plebbit-js` import and dependency
- `Plebbit` class name
- `plebbit.createSubplebbit()` method calls
- `plebbit.getSubplebbit()` method calls
- `plebbit.subplebbits` property
- `SubplebbitEditOptions` and other plebbit-js types
- `plebbitRpcClientsOptions` and similar plebbit-js options
- `--plebbitRpcUrl` CLI flag (maps to plebbit-js)
- `--plebbitOptions.*` CLI flags

---

## External Repositories Requiring Changes

These repositories are outside bitsocial-cli but will need coordinated updates:

| Repository | Changes Needed | Status |
|------------|---------------|--------|
| @plebbit/plebbit-js → @pkc/pkc-js | Core library rename | [ ] Not Started |
| @plebbit/plebbit-logger → @pkc/pkc-logger | Logger package rename | [ ] Not Started |
| WebUIs (seedit, plebchan, plebones) | Update default options variable names | [ ] Not Started |
